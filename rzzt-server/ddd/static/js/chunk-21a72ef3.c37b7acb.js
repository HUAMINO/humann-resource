(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21a72ef3"],{"0e77":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dashboard-container"},[r("div",{staticClass:"app-container"},[r("page-tools",{attrs:{"show-before":!0},scopedSlots:e._u([{key:"before",fn:function(){return[e._v(e._s(e.tipsInfo))]},proxy:!0},{key:"after",fn:function(){return[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.$router.push("/salarys/setting")}}},[e._v("设置")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.$router.push("/salarys/monthStatement?yearMonth="+e.yearMonth)}}},[e._v(e._s(e.yearMonth)+"报表")])]},proxy:!0}])}),r("el-card",{staticClass:"hr-block"},[r("el-form",{attrs:{"label-width":"120px"}},[r("el-form-item",{attrs:{label:"聘用形式:"}},[r("el-checkbox-group",{model:{value:e.formData.approvalsTypeChecks,callback:function(t){e.$set(e.formData,"approvalsTypeChecks",t)},expression:"formData.approvalsTypeChecks"}},e._l(e.approvalsType,(function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.id},on:{change:e.changeParams}},[e._v(e._s(t.value))])})),1)],1),r("el-form-item",{attrs:{label:"员工状态:"}},[r("el-checkbox-group",{model:{value:e.formData.approvalsStateChecks,callback:function(t){e.$set(e.formData,"approvalsStateChecks",t)},expression:"formData.approvalsStateChecks"}},e._l(e.approvalsState,(function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.id},on:{change:e.changeParams}},[e._v(e._s(t.value))])})),1)],1),r("el-form-item",{attrs:{label:"部门:"}},[r("el-checkbox-group",{model:{value:e.formData.departmentChecks,callback:function(t){e.$set(e.formData,"departmentChecks",t)},expression:"formData.departmentChecks"}},e._l(e.departments,(function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.id},on:{change:e.changeParams}},[e._v(e._s(t.name))])})),1)],1)],1)],1),r("el-card",{staticClass:"hr-block"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),r("el-table-column",{attrs:{prop:"username",label:"姓名",width:"100"}}),r("el-table-column",{attrs:{prop:"mobile",label:"手机",width:"130"}}),r("el-table-column",{attrs:{prop:"workNumber",label:"工号",width:"100"}}),r("el-table-column",{attrs:{prop:"formOfEmployment",formatter:e.formatEmployment,width:"100",label:"聘用形式"}}),r("el-table-column",{attrs:{prop:"departmentName",label:"部门",width:"100"}}),r("el-table-column",{attrs:{prop:"timeOfEntry",width:"130",label:"入职时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatDate")(t.row.timeOfEntry))+" ")]}}])}),r("el-table-column",{attrs:{label:"工资基数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.currentBasicSalary+t.row.currentPostWage)+" ")]}}])}),r("el-table-column",{attrs:{label:"津贴方案",width:"100"}},[e._v("通用方案")]),r("el-table-column",{attrs:{label:"操作",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.currentBasicSalary+t.row.currentPostWage>0?r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.changeSalary("ChangeSalary",t.row.id)}}},[e._v("调薪")]):r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.fixedSalary("FixedSalary",t.row.id)}}},[e._v("定薪")]),r("el-button",{attrs:{type:"text",size:"mini"}},[r("router-link",{attrs:{to:{path:"/salarys/details/"+e.yearMonth+"/"+t.row.id}}},[e._v("查看")])],1)]}}])})],1),r("el-row",{staticStyle:{height:"50px"},attrs:{type:"flex",justify:"center",align:"middle"}},[r("el-pagination",{attrs:{background:"",layout:"prev,pager,next",total:e.page.total,"current-page":e.page.page,"page-size":e.page.pageSize},on:{"current-change":e.changePage}})],1)],1),r("el-dialog",{attrs:{title:e.topLabel,visible:e.centerDialogVisible,width:"50%",left:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[r(e.currentComponent,{tag:"component",attrs:{"user-salary":e.selectedSalaryInfo,"user-id":e.selectUserId},on:{success:e.getSalarysList,onDialogCancel:function(t){e.centerDialogVisible=!1}}})],1)],1)])},n=[],l=r("5530"),s=r("1da1"),o=(r("96cf"),r("7db0"),r("d3b7"),r("25f0"),r("173d")),i=r("01f5"),c=r("1eef"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"changeSalary"},[r("div",{staticClass:"infoBox"},[e._m(0),r("div",{staticClass:"info"},[r("p",[r("span",{staticClass:"name"},[e._v(e._s(e.user.username))])]),r("p",[r("span",[e._v("部门：")]),e._v(" "+e._s(e.user.departmentName)+" ")]),r("p",[r("span",[e._v("入职时间：")]),e._v(" "+e._s(e._f("formatDate")(e.user.timeOfEntry))+" ")])])]),r("div",[r("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"110px"}},[r("el-form-item",{attrs:{label:"调整基本工资"}},[r("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:e.userSalary.currentBasicSalary,callback:function(t){e.$set(e.userSalary,"currentBasicSalary",t)},expression:"userSalary.currentBasicSalary"}}),r("span",{staticClass:"Label"},[e._v("->")]),r("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入调整后基本工资",type:"number"},model:{value:e.ruleForm.currentBasicSalary,callback:function(t){e.$set(e.ruleForm,"currentBasicSalary",t)},expression:"ruleForm.currentBasicSalary"}})],1),r("el-form-item",{attrs:{label:"调整岗位工资"}},[r("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:e.userSalary.currentPostWage,callback:function(t){e.$set(e.userSalary,"currentPostWage",t)},expression:"userSalary.currentPostWage"}}),r("span",{staticClass:"Label"},[e._v("->")]),r("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入调整后岗位工资",type:"number"},model:{value:e.ruleForm.currentPostWage,callback:function(t){e.$set(e.ruleForm,"currentPostWage",t)},expression:"ruleForm.currentPostWage"}})],1),r("el-form-item",{attrs:{label:"工资合计"}},[r("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:e.computeCurrentTotal,callback:function(t){e.computeCurrentTotal=t},expression:"computeCurrentTotal"}}),r("span",{staticClass:"Label"},[e._v("->")]),r("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:e.computeChangeTotal,callback:function(t){e.computeChangeTotal=t},expression:"computeChangeTotal"}})],1),r("el-form-item",{attrs:{label:"调整幅度"}},[r("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:e.computeChangeSize,callback:function(t){e.computeChangeSize=t},expression:"computeChangeSize"}})],1),r("div",{staticClass:"buttones",staticStyle:{"text-align":"center","margin-top":"40px"}},[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),r("el-button",{on:{click:e.onClose}},[e._v("关闭")])],1)],1)],1)],1)])},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo"},[a("img",{attrs:{src:r("616f"),alt:""}})])}],p=(r("a9e3"),r("c24f")),f={name:"UsersTableIndex",props:["userSalary","userId"],data:function(){return{user:{},ruleForm:{}}},computed:{computeCurrentTotal:function(){var e=0;null!=this.userSalary.currentBasicSalary&&(e=Number(this.userSalary.currentBasicSalary));var t=0;return null!=this.userSalary.currentPostWage&&(t=Number(this.userSalary.currentPostWage)),e+t},computeChangeTotal:function(){var e=0;null!=this.ruleForm.currentBasicSalary&&(e=Number(this.ruleForm.currentBasicSalary));var t=0;return null!=this.ruleForm.currentPostWage&&(t=Number(this.ruleForm.currentPostWage)),e+t},computeChangeSize:function(){return this.computeChangeTotal-this.computeCurrentTotal}},created:function(){this.getUserDetailById()},methods:{onSubmit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.ruleForm,r.userId=e.userId,t.next=4,Object(o["a"])(r);case 4:e.$message({message:"保存成功",type:"success"}),e.$emit("success"),e.onClose();case 7:case"end":return t.stop()}}),t)})))()},onClose:function(){this.ruleForm={},this.$emit("onDialogCancel")},getUserDetailById:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["c"])(e.userId);case 2:e.user=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}},d=f,b=(r("8f03"),r("2877")),h=Object(b["a"])(d,u,m,!1,null,"51da99c8",null),g=h.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fixedDalary"},[r("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"120px",model:e.formLabelAlign}},[r("el-form-item",{attrs:{label:"当前基本工资"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"当前基本工资",type:"number"},model:{value:e.formLabelAlign.currentBasicSalary,callback:function(t){e.$set(e.formLabelAlign,"currentBasicSalary",t)},expression:"formLabelAlign.currentBasicSalary"}})],1),r("el-form-item",{attrs:{label:"当前岗位工资"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"当前岗位工资",type:"number"},model:{value:e.formLabelAlign.currentPostWage,callback:function(t){e.$set(e.formLabelAlign,"currentPostWage",t)},expression:"formLabelAlign.currentPostWage"}})],1),r("el-form-item",{attrs:{label:"当前工资合计"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"当前工资合计, 自动计算",disabled:!0},model:{value:e.computeCurrentTotal,callback:function(t){e.computeCurrentTotal=t},expression:"computeCurrentTotal"}})],1),r("el-form-item",{attrs:{label:"转正基本工资"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"转正基本工资",type:"number"},model:{value:e.formLabelAlign.correctionOfBasicWages,callback:function(t){e.$set(e.formLabelAlign,"correctionOfBasicWages",t)},expression:"formLabelAlign.correctionOfBasicWages"}})],1),r("el-form-item",{attrs:{label:"转正岗位工资"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"转正岗位工资",type:"number"},model:{value:e.formLabelAlign.turnToPostWages,callback:function(t){e.$set(e.formLabelAlign,"turnToPostWages",t)},expression:"formLabelAlign.turnToPostWages"}})],1),r("el-form-item",{attrs:{label:"转正工资合计"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"当前基本工资, 自动计算",disabled:!0},model:{value:e.computeTurnTotal,callback:function(t){e.computeTurnTotal=t},expression:"computeTurnTotal"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确认")]),r("el-button",{on:{click:e.onClose}},[e._v("关闭")])],1)],1)],1)},v=[],S={name:"UsersTableIndex",props:["userId"],data:function(){return{labelPosition:"left",formLabelAlign:{},turnTotal:0}},computed:{computeCurrentTotal:function(){var e=0;null!=this.formLabelAlign.currentBasicSalary&&(e=Number(this.formLabelAlign.currentBasicSalary));var t=0;return null!=this.formLabelAlign.currentPostWage&&(t=Number(this.formLabelAlign.currentPostWage)),e+t},computeTurnTotal:function(){var e=0;null!=this.formLabelAlign.correctionOfBasicWages&&(e=Number(this.formLabelAlign.correctionOfBasicWages));var t=0;return null!=this.formLabelAlign.turnToPostWages&&(t=Number(this.formLabelAlign.turnToPostWages)),e+t}},methods:{onSubmit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.formLabelAlign.userId=e.userId,r=e.formLabelAlign,t.next=4,Object(o["h"])(r);case 4:e.$message.success("定薪成功"),e.$emit("success"),e.onClose();case 7:case"end":return t.stop()}}),t)})))()},onClose:function(){this.formLabelAlign={},this.$emit("onDialogCancel")}}},w=S,x=(r("d089"),Object(b["a"])(w,y,v,!1,null,"c50c3366",null)),k=x.exports,C={name:"UsersTableIndex",components:{ChangeSalary:g,FixedSalary:k},data:function(){return{seeState:"",centerDialogVisible:!1,topLabel:"转正",approvalsType:i["a"].hireType,approvalsState:i["a"].workingState,department:[],subsidyScheme:[],list:[],departments:[],loading:!1,page:{total:0,page:1,pageSize:10},tips:{},yearMonth:"",formData:{approvalsTypeChecks:[],approvalsStateChecks:[],departmentChecks:[]},selectedSalaryInfo:{},selectUserId:null,currentComponent:""}},computed:{tipsInfo:function(){return"本月0：入职 0 离职 0 调薪 0 未定薪 0"}},created:function(){this.getSalarysList(),this.getDepartments()},methods:{formatEmployment:function(e){var t=this.approvalsType.find((function(t){return t.id===e.formOfEmployment.toString()}));return t?t.value:"未知"},getSalarysList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["c"])();case 2:return r=t.sent,e.yearMonth=r.dataMonth,e.loading=!0,t.next=7,Object(o["e"])(Object(l["a"])(Object(l["a"])({},e.page),e.formData));case 7:a=t.sent,n=a.rows,s=a.total,e.list=n,e.page.total=s,e.loading=!1;case 13:case"end":return t.stop()}}),t)})))()},getDepartments:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["c"])();case 2:r=t.sent,a=r.depts,e.departments=a;case 5:case"end":return t.stop()}}),t)})))()},getTips:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["g"])();case 2:r=t.sent,a=r.tipsRes,e.tips=a;case 5:case"end":return t.stop()}}),t)})))()},changePage:function(e){this.page.page=e,this.getSalarysList()},changeSalary:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r.topLabel="调薪",r.currentComponent=e,r.centerDialogVisible=!0,r.selectUserId=t,a.next=6,Object(o["d"])(t);case 6:r.selectedSalaryInfo=a.sent;case 7:case"end":return a.stop()}}),a)})))()},fixedSalary:function(e){this.topLabel="定薪",this.currentComponent=e,this.centerDialogVisible=!0},changeParams:function(){this.page.page=1,this.getSalarysList()}}},_=C,O=Object(b["a"])(_,a,n,!1,null,null,null);t["default"]=O.exports},"173d":function(e,t,r){"use strict";r.d(t,"e",(function(){return n})),r.d(t,"g",(function(){return l})),r.d(t,"f",(function(){return s})),r.d(t,"c",(function(){return o})),r.d(t,"j",(function(){return i})),r.d(t,"d",(function(){return c})),r.d(t,"a",(function(){return u})),r.d(t,"h",(function(){return m})),r.d(t,"b",(function(){return p})),r.d(t,"i",(function(){return f}));var a=r("b775");function n(e){return Object(a["a"])({url:"/salarys/list",data:e,method:"post"})}function l(e){return Object(a["a"])({url:"/salarys/tips/".concat(e)})}function s(){return Object(a["a"])({url:"/salarys/settings"})}function o(){return Object(a["a"])({url:"/salarys/company-settings"})}function i(e){return Object(a["a"])({url:"/salarys/settings",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/salarys/modify/".concat(e)})}function u(e){return Object(a["a"])({url:"/salarys/modify/".concat(e.userId),method:"post",data:e})}function m(e){return Object(a["a"])({url:"/salarys/init/".concat(e.userId),method:"post",data:e})}function p(e){return Object(a["a"])({url:"/salarys/reports/".concat(e.yearMonth),params:e})}function f(e){return Object(a["a"])({url:"/salarys/reports/".concat(e.yearMonth,"/newReport"),method:"put",data:e})}},"1eef":function(e,t,r){"use strict";r.d(t,"e",(function(){return n})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"f",(function(){return c}));var a=r("b775");function n(){return Object(a["a"])({method:"GET",url:"/company/department"})}var l=n;function s(e){return Object(a["a"])({method:"POST",url:"/company/department",data:e})}function o(e){return Object(a["a"])({method:"DELETE",url:"/company/department/"+e})}function i(e){return Object(a["a"])({method:"GET",url:"/company/department/"+e})}function c(e){return Object(a["a"])({method:"PUT",url:"/company/department/"+e.id,data:e})}},"4d35":function(e,t,r){},"616f":function(e,t,r){e.exports=r.p+"static/img/img.0615818f.jpeg"},6790:function(e,t,r){},"8f03":function(e,t,r){"use strict";r("4d35")},d089:function(e,t,r){"use strict";r("6790")}}]);